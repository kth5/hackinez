# Maintainer: Alexander Baldeck <alex.bldck@gmail.com> 
pkgname=hodlminer-wolf
pkgver=r54.c306fe6
pkgrel=1
_commit=c306fe67766f23fe7a77947a84cac96e9911f887
pkgdesc="Wolf's HOdl CPU miner with mods"
arch=(x86_64)
url="https://github.com/kth5/hodlminer-wolf"
license=('GPL')
depends=('openssl' 'curl')
source=("git+https://github.com/kth5/hodlminer-wolf.git#commit=${_commit}")
md5sums=('SKIP')

pkgver() {
        cd ${pkgname} 
        printf "r%s.%s" "$(git rev-list --count HEAD)" "$(git rev-parse --short HEAD)"
}

prepare() {
	cd ${pkgname}
	sh autogen.sh
}

build() {
	cd ${pkgname}
	./configure --with-curl=/usr
	make
}

package() {
	cd ${pkgname}
	install -D -m755 hodlminer ${pkgdir}/usr/bin/hodlminer-wolf
}
